<!-- pomodoro_app/templates/main/timer.html -->
{% extends "base.html" %}

{% block content %}
  <h2>Start a Pomodoro Session</h2>

  {# Add a container div if needed, or use an existing one #}
  <div id="timer-component">

    <div class="timer-controls">
      <div class="timer-setup">
        <label>Work: <input id="work-minutes" type="number" value="25" min="1"> minutes</label>
        <label>Break: <input id="break-minutes" type="number" value="5" min="1"> minutes</label>
      </div>
      <div class="timer-buttons">
          <button id="start-btn" class="btn">Start</button>
          <button id="pause-btn" class="btn" style="display: none;">Pause</button>
          <button id="reset-btn" class="btn" style="display: none;">Reset</button>
      </div>
    </div>

    <div id="timer-display" class="timer-display">00:00</div>
    <div id="status-message" class="status-message">Set durations and click Start.</div>

    <!-- Audio element for alarm -->
    <audio id="alarm-sound" src="{{ url_for('static', filename='alarm.mp3') }}" preload="auto"></audio>

  </div> {# End of timer-component div #}

  {#
     Inline script to pass dynamic URLs from Flask/Jinja2 to the static JS file.
     Place this *before* the main timer.js script tag.
  #}
  <script>
    window.pomodoroUrls = {
      start: "{{ url_for('main.api_start_timer') }}",
      complete: "{{ url_for('main.api_complete_phase') }}"
    };
  </script>

  {# Link to the external JavaScript file. 'defer' is recommended. #}
  <script src="{{ url_for('static', filename='js/timer.js') }}" defer></script>

{% endblock %}

{# Optional: You could also place the script tags at the end of the body in base.html
   if you prefer that pattern, just make sure the inline URL script comes before
   the timer.js link.
#}