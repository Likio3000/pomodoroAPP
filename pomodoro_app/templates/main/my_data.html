{% extends "base.html" %}
{% block content %}
  <h2 class="dashboard-main-title">My Data</h2>
  <p>Below is your stored chat history. You can delete individual messages.</p>
  {% if messages %}
    <ul class="chat-history">
      {% for msg in messages %}
        <li class="chat-history-item">
          <div>
            <strong>{{ msg.role.title() }}</strong>
            <em>{{ msg.timestamp.isoformat() if msg.timestamp else '' }}</em>
            <form method="post"
                  action="{{ url_for('main.delete_message', message_id=msg.id) }}"
                  style="display:inline"
                  onsubmit="return confirm('Delete this message?');">
                {{ csrf_token() }}
                <button class="btn btn-sm btn-danger">Delete</button>
            </form>
          </div>
          <div class="chat-text">{{ msg.text }}</div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No chat history stored.</p>
  {% endif %}
{% endblock %}
